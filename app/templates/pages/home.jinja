{#=====================================================
  Home page
  - Hero style greeting banner
  - List of things passed in as 'things' array
  - Form for adding a new thing
=====================================================#}

{% extends 'pages/base.jinja' %}


{% block title %}

    Client Tracker

{% endblock %}


{% block content %}

      {% if session.user_id %}

            <h1>Clients</h1>

        <article>
            <div style="overflow-x:auto;">
                <table>

        <thead>

            <tr>
                <th>Name</th>
                <th>Phone</th>
                <th>Address</th>
            </tr>

        </thead>

        <tbody>

            {% for client in clients %}

            <tr>
                <td> <a href="/job-info/{{ client.id }}">{{ client.name }}</a> </td>
                <td>{{ client.phone }}</td>
                <td>{{ client.address }}</td>
                <td style="text-align: right;">
                <a href="/client-edit/{{ client.id }}">Edit</a>
                <a href="/delete/{{ client.id }}" onclick="return confirm('Really delete?');">Delete</a>
                </td>
            </tr>

            {% endfor %}

        </tbody>
        
    </table>
    </div>

    
        <details>

            <summary><strong>Add a Client</strong></summary>

                        <form action="/client-add" method="POST">

                <fieldset>
                <input 
                    type="text" 
                    name="name" 
                    placeholder="Name of client" 
                required>

                <input 
                    type="text" 
                    name="phone" 
                    placeholder="Phone number of client" 
                required>

                <input 
                    type="text" 
                    name="address" 
                    placeholder="Address of client" 
                required>

                <button>Submit</button>

            </form>
            </fieldset>

        {% else %}

            <h1>Welcome</h1>


        <header>
            <h2>Please Log In</h2>
        </header>

        <form action="/login-user" method="POST">

            <input
                type="text"
                name="username"
                placeholder="Username"
                required
            >

            <input
                type="password"
                name="password"
                placeholder="Password"
                required
            >

            <button>Login</button>

        </form>
        </details>

        <footer>
            Or, if you don't have an account, <a href="/register">Sign Up</a>
        </footer>

    </article>

    {% endif %}

{% endblock %}